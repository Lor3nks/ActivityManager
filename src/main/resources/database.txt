CREATE TABLE IMPIEGATO ( 
USERNAME VARCHAR2(20) PRIMARY KEY, 
PASSWORD VARCHAR2(20),
EMAIL VARCHAR(70),
NOME VARCHAR(20),
COGNOME VARCHAR2(20),
DATA_NASCITA DATE,
ABILITAZIONE NUMBER(1),
RUOLO VARCHAR2(20));


CREATE TABLE ATTIVITA_DISPONIBILI (
ID_DISP VARCHAR2(4) PRIMARY KEY,
DESCRIZIONE VARCHAR2(20),
ABILITAZIONE NUMBER(1));


CREATE TABLE ATTIVITA_SVOLTE (
ID_TRIGG NUMBER(4)PRIMARY KEY,
USERNAME VARCHAR2(20),
ID_DISP VARCHAR2(4),
DATA_ATTIVITA DATE,
ORA_INIZIO DATE,
ORA_FINE DATE,
NOTE VARCHAR2(50),
FOREIGN KEY (ID_DISP) REFERENCES ATTIVITA_DISPONIBILI(ID_DISP),
FOREIGN KEY(USERNAME) REFERENCES IMPIEGATO(USERNAME));

CREATE SEQUENCE ID_SEQ START WITH 1 INCREMENT BY 1 NOMAXVALUE;

CREATE TRIGGER ID_TRIGG 
BEFORE INSERT ON ATTIVITA_SVOLTE
FOR EACH ROW 
BEGIN 
    SELECT ID_SEQ.NEXTVAL INTO :NEW.ID_TRIGG FROM DUAL;
    END;


insert into IMPIEGATO values('ADMIN', 'ADMIN', 'ADMIN@MAIL.COM', 'ADMIN', 'ADMIN', TO_DATE('01-01-1900', 'DD-MM-YYYY'), 1, 'amministratore';

Insert into ATTIVITA_DISPONIBILI (ID_DISP,DESCRIZIONE,ABILITAZIONE) values ('Att1','Attività 1','1');
Insert into ATTIVITA_DISPONIBILI (ID_DISP,DESCRIZIONE,ABILITAZIONE) values ('Att2','Attività 2','1');
Insert into ATTIVITA_DISPONIBILI (ID_DISP,DESCRIZIONE,ABILITAZIONE) values ('Att3','Attività 3','1');
Insert into ATTIVITA_DISPONIBILI (ID_DISP,DESCRIZIONE,ABILITAZIONE) values ('Att4','Attività 4','1');
